{% extends "panel.html" %}

{% load static %}

{% block panel-content %}

<div class="row justify-content-center content">
  <h5 class="col-12 text-center mb-4">Detalle del producto</h5>
  <div class="col-md-9">

    <div class="card mb-4">
      <div class="card-body">
        <h4>{{ product.name }}</h4>
        <p><strong>Codigo de Barras:</strong> {{ object.barcode }}</p>
        <p><strong>Proveedor:</strong> {{ product.provider }}</p>
        <p><strong>Marca:</strong> {{ product.marca }}</p>
        <p><strong>Vencimiento:</strong> {{ product.due_date }}</p>
        <p><strong>Unidad de medida:</strong> {{ product.get_unit_display }}</p>
        <p><strong>Cantidad en Almacen:</strong> {{ product.count }}</p>
        <p><strong>Precio Compra:</strong> {{ product.purchase_price }}</p>
        <p><strong>Precio Venta:</strong> {{ product.sale_price }}</p>
        <p><strong>Numero de Ventas:</strong> {{ product.num_sale }}</p>
        <p><strong>Descripcion:</strong> {{ product.description }}</p>
      </div>
    </div>

    <h4 class="mb-3">Ventas en los últimos 30 días</h4>
    <div class="table-responsive mb-4">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Producto</th>
            <th>Ventas</th>
          </tr>
        </thead>
        <tbody>
          {% for ventas in ventas_mes %}
          <tr>
            <td>{{ ventas.sale__date_sale__date }}</td>
            <td>{{ ventas.product__name }}</td>
            <td>{{ ventas.cantidad_vendida }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="text-center text-success">No hay ventas para este producto</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-center">
      <a target="_blank" href="{% url 'producto_app:producto-detail_print' product.id %}" class="btn btn-primary">Imprimir</a>
    </div>
  </div>
</div>

{% endblock panel-content %}
